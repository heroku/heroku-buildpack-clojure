#!/usr/bin/env bash

set -euo pipefail

BUILDPACK_DIR="$(cd "$(dirname "$(dirname "${BASH_SOURCE[0]}")")" && pwd)"

# shellcheck source=lib/output.sh
source "${BUILDPACK_DIR}/lib/output.sh"

if [[ -f "${1}/project.clj" ]]; then
	if grep -q ":min-lein-version[[:space:]]\+\"2" "${1}/project.clj"; then
		echo "Clojure (Leiningen 2)" && exit 0
	else
		echo "Clojure" && exit 0
	fi
else
	output::error <<-EOF
		Could not find a 'project.clj' file! Please ensure it exists and is checked into Git.
	EOF
	exit 1
fi
